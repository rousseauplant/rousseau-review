<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rousseau Review - Plant Cover Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: #FEF4E0; min-height: 100vh; }
    .font-bungee { font-family: 'Bungee', cursive; }
    
    header { background: white; border-bottom: 1px solid #fcd34d; padding: 16px 24px; }
    .header-content { max-width: 500px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
    .logo { display: flex; align-items: center; gap: 8px; }
    .logo-main { font-size: 20px; color: #1e3a5f; }
    .logo-sub { font-size: 11px; color: #6b7280; text-transform: uppercase; }
    .nav-link { color: #1e3a5f; text-decoration: none; font-weight: 500; font-size: 14px; }
    
    .container { max-width: 500px; margin: 0 auto; padding: 24px; }
    
    .hero { text-align: center; margin-bottom: 24px; }
    .badge { display: inline-block; background: #fef3c7; color: #b45309; font-size: 11px; font-weight: 700; padding: 4px 12px; border-radius: 999px; margin-bottom: 12px; }
    .hero h1 { font-size: 28px; color: #1e3a5f; margin-bottom: 4px; }
    .hero p { color: #6b7280; font-size: 14px; }
    
    .card { background: white; border-radius: 16px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); padding: 20px; }
    
    .form-group { margin-bottom: 20px; }
    .form-label { display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 6px; }
    .form-hint { font-size: 12px; color: #6b7280; margin-bottom: 8px; }
    .form-input { width: 100%; padding: 12px 16px; border: 1px solid #d1d5db; border-radius: 12px; font-size: 14px; }
    .form-input:focus { outline: none; border-color: #1e3a5f; }
    
    .upload-area { border: 2px dashed #d1d5db; border-radius: 12px; padding: 32px; text-align: center; cursor: pointer; transition: all 0.2s; }
    .upload-area:hover { border-color: #1e3a5f; background: #eff6ff; }
    .upload-preview { max-height: 200px; border-radius: 8px; }
    .upload-icon { width: 40px; height: 40px; color: #9ca3af; margin-bottom: 8px; }
    
    .zone-box { background: #fffbeb; border-radius: 12px; padding: 16px; }
    .zone-btn { width: 100%; padding: 12px; border-radius: 8px; text-align: left; border: 2px solid; margin-bottom: 8px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 8px; }
    .zone-btn:last-child { margin-bottom: 0; }
    .zone-dot { width: 10px; height: 10px; border-radius: 50%; }
    .zone-btn.high { border-color: #22c55e; background: #f0fdf4; }
    .zone-btn.high .zone-dot { background: #22c55e; }
    .zone-btn.low { border-color: #eab308; background: #fefce8; }
    .zone-btn.low .zone-dot { background: #eab308; }
    .zone-btn.no { border-color: #9ca3af; background: #f9fafb; }
    .zone-btn.no .zone-dot { background: #9ca3af; }
    .zone-btn.active { border-color: #1e3a5f; background: #eff6ff; }
    .zone-label { font-size: 13px; font-weight: 700; }
    .zone-btn.high .zone-label { color: #15803d; }
    .zone-btn.low .zone-label { color: #a16207; }
    .zone-btn.no .zone-label { color: #4b5563; }
    
    .dir-buttons { display: flex; gap: 8px; flex-wrap: wrap; }
    .dir-btn { padding: 8px 16px; border: 1px solid #d1d5db; border-radius: 8px; background: white; font-size: 13px; cursor: pointer; }
    .dir-btn.active { background: #1e3a5f; color: white; border-color: #1e3a5f; }
    
    .checkbox-row { display: flex; align-items: center; gap: 8px; cursor: pointer; }
    .checkbox-row input { width: 18px; height: 18px; accent-color: #1e3a5f; }
    
    .slider-container { display: flex; align-items: center; gap: 12px; }
    .slider { flex: 1; -webkit-appearance: none; height: 6px; background: #e5e7eb; border-radius: 3px; }
    .slider::-webkit-slider-thumb { -webkit-appearance: none; width: 18px; height: 18px; background: #1e3a5f; border-radius: 50%; cursor: pointer; border: 2px solid white; }
    .slider-value { font-size: 16px; font-weight: 700; color: #1e3a5f; min-width: 50px; }
    
    .generate-btn { width: 100%; background: #1e3a5f; color: white; border: none; padding: 16px; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; }
    .generate-btn:hover { background: #1e4080; }
    .generate-btn:disabled { background: #d1d5db; cursor: not-allowed; }
    
    .cover-display { text-align: center; }
    .cover-img { width: 100%; border-radius: 16px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.2); }
    .action-buttons { display: flex; gap: 12px; margin-top: 16px; }
    .action-btn { flex: 1; padding: 12px; border-radius: 12px; font-size: 14px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; }
    .action-btn.share { background: white; border: 2px solid #1e3a5f; color: #1e3a5f; }
    .action-btn.save { background: white; border: 2px solid #1e3a5f; color: #1e3a5f; }
    .action-btn.new { background: #d97706; border: none; color: white; }
    
    .hidden { display: none; }
  </style>
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header>
      <div class="header-content">
        <div class="logo">
          <span class="logo-main font-bungee">ROUSSEAU</span>
          <span class="logo-sub">PLANT CARE</span>
        </div>
        <a href="#" class="nav-link" onclick="showGallery()">Browse Gallery</a>
      </div>
    </header>

    <!-- Form View -->
    <div id="form-view" class="container">
      <div class="hero">
        <span class="badge">FREE TOOL</span>
        <h1 class="font-bungee">CREATE YOUR COVER</h1>
        <p>Feature your plant in the Rousseau Review</p>
      </div>

      <div class="card">
        <!-- Photo -->
        <div class="form-group">
          <label class="form-label">Plant Photo <span style="color: #ef4444;">*</span></label>
          <div class="upload-area" onclick="document.getElementById('photo-input').click()">
            <div id="photo-preview">
              <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
              <p style="color: #9ca3af; font-size: 14px;">Click to upload your plant photo</p>
            </div>
          </div>
          <input type="file" id="photo-input" accept="image/*" class="hidden" onchange="handlePhoto(event)">
        </div>

        <!-- Plant Name -->
        <div class="form-group">
          <label class="form-label">Plant Name</label>
          <input type="text" id="plant-name" class="form-input" placeholder="e.g., Anthurium Warocqueanum">
        </div>

        <!-- Nutrients -->
        <div class="form-group">
          <label class="form-label">Nutrients</label>
          <p class="form-hint">Appears as "Fueled by..." on cover</p>
          <input type="text" id="nutrients" class="form-input" placeholder="e.g., Aroid Food, Healthy Root, Healthy Leaf">
        </div>

        <!-- Light Zone -->
        <div class="form-group">
          <div class="zone-box">
            <label class="form-label" style="margin-bottom: 12px;">Light Zone</label>
            <button class="zone-btn high active" onclick="setZone('high', this)">
              <span class="zone-dot"></span>
              <span class="zone-label">HIGH GROWTH CONDITIONS</span>
            </button>
            <button class="zone-btn low" onclick="setZone('low', this)">
              <span class="zone-dot"></span>
              <span class="zone-label">LOW GROWTH CONDITIONS</span>
            </button>
            <button class="zone-btn no" onclick="setZone('no', this)">
              <span class="zone-dot"></span>
              <span class="zone-label">NO GROWTH CONDITIONS</span>
            </button>
          </div>
        </div>

        <!-- Direction -->
        <div class="form-group">
          <label class="form-label">Window Direction</label>
          <div class="dir-buttons">
            <button class="dir-btn" onclick="setDir('East', this)">East</button>
            <button class="dir-btn active" onclick="setDir('West', this)">West</button>
            <button class="dir-btn" onclick="setDir('North', this)">North</button>
            <button class="dir-btn" onclick="setDir('South', this)">South</button>
          </div>
        </div>

        <!-- Grow Lights -->
        <div class="form-group">
          <label class="checkbox-row">
            <input type="checkbox" id="grow-lights">
            <span>Uses grow lights</span>
          </label>
        </div>

        <!-- Temperature -->
        <div class="form-group">
          <label class="form-label">Temperature: <span id="temp-display">72°F</span></label>
          <input type="range" class="slider" id="temp" min="50" max="95" value="72" oninput="updateTemp(this.value)">
        </div>

        <!-- Humidity -->
        <div class="form-group">
          <label class="form-label">Humidity: <span id="humidity-display">50%</span></label>
          <input type="range" class="slider" id="humidity" min="20" max="90" value="50" oninput="updateHumidity(this.value)">
        </div>

        <button class="generate-btn font-bungee" onclick="generateCover()" id="gen-btn">Generate Cover</button>
      </div>
    </div>

    <!-- Cover View -->
    <div id="cover-view" class="container hidden">
      <div class="cover-display">
        <img id="cover-image" class="cover-img" src="" alt="Generated cover">
        <div class="action-buttons">
          <button class="action-btn share" onclick="shareCover()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
            Share
          </button>
          <button class="action-btn save" onclick="downloadCover()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            Save
          </button>
          <button class="action-btn new" onclick="resetForm()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
            New Cover
          </button>
        </div>
      </div>
    </div>

    <!-- Gallery View -->
    <div id="gallery-view" class="container hidden">
      <h2 class="font-bungee" style="font-size: 24px; color: #1e3a5f; margin-bottom: 20px;">Community Gallery</h2>
      <div id="gallery-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
        <div style="background: white; border-radius: 12px; padding: 40px; text-align: center; color: #9ca3af;">
          No covers yet. Be the first!
        </div>
      </div>
    </div>
  </div>

  <canvas id="canvas" style="display: none;"></canvas>

  <script>
    let photoData = null;
    let selectedZone = 'high';
    let selectedDir = 'West';
    let generatedCoverUrl = null;

    const MONTHS = ['JANUARY', 'FEBRUARY', 'MARCH', 'APRIL', 'MAY', 'JUNE', 'JULY', 'AUGUST', 'SEPTEMBER', 'OCTOBER', 'NOVEMBER', 'DECEMBER'];

    function handlePhoto(e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (ev) => {
          photoData = ev.target.result;
          document.getElementById('photo-preview').innerHTML = `<img src="${photoData}" class="upload-preview">`;
        };
        reader.readAsDataURL(file);
      }
    }

    function setZone(zone, btn) {
      selectedZone = zone;
      document.querySelectorAll('.zone-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
    }

    function setDir(dir, btn) {
      selectedDir = dir;
      document.querySelectorAll('.dir-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
    }

    function updateTemp(val) {
      document.getElementById('temp-display').textContent = val + '°F';
    }

    function updateHumidity(val) {
      document.getElementById('humidity-display').textContent = val + '%';
    }

    async function generateCover() {
      const plantName = document.getElementById('plant-name').value;
      if (!photoData || !plantName) {
        alert('Please upload a photo and enter a plant name');
        return;
      }

      document.getElementById('gen-btn').textContent = 'Generating...';
      document.getElementById('gen-btn').disabled = true;

      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = 600;
      canvas.height = 800;

      // Draw photo
      const img = new Image();
      await new Promise((res, rej) => { img.onload = res; img.onerror = rej; img.src = photoData; });
      ctx.drawImage(img, 0, 0, 600, 800);

      // Dark gradient overlay
      const grad = ctx.createLinearGradient(0, 300, 0, 800);
      grad.addColorStop(0, 'rgba(0,0,0,0)');
      grad.addColorStop(0.4, 'rgba(0,0,0,0.5)');
      grad.addColorStop(1, 'rgba(0,0,0,0.85)');
      ctx.fillStyle = grad;
      ctx.fillRect(0, 0, 600, 800);

      // Header
      ctx.fillStyle = 'rgba(255,255,255,0.8)';
      ctx.font = '12px Inter, Arial';
      ctx.textAlign = 'center';
      ctx.fillText('ROUSSEAU REVIEW', 300, 40);
      
      const now = new Date();
      ctx.fillStyle = 'rgba(255,255,255,0.5)';
      ctx.font = '11px Inter, Arial';
      ctx.fillText(`${MONTHS[now.getMonth()]} ${now.getFullYear()}`, 300, 58);

      // Plant name
      ctx.fillStyle = '#fff';
      ctx.font = 'bold 38px "Bungee", Arial';
      ctx.textAlign = 'left';
      const words = plantName.toUpperCase().split(' ');
      let line = '', y = 500;
      for (const w of words) {
        const test = line + w + ' ';
        if (ctx.measureText(test).width > 560 && line) {
          ctx.fillText(line, 20, y);
          line = w + ' ';
          y += 46;
        } else line = test;
      }
      ctx.fillText(line, 20, y);

      // Nutrients
      const nutrients = document.getElementById('nutrients').value;
      if (nutrients) {
        y += 28;
        ctx.fillStyle = '#d97706';
        ctx.font = 'bold 13px Inter, Arial';
        ctx.fillText(`FUELED BY ${nutrients.toUpperCase()}`, 20, y);
      }

      // Stats cards
      const cardY = y + 50;
      const cardW = 170;
      const cardH = 70;
      const gap = 15;

      // Light
      ctx.fillStyle = 'rgba(0,0,0,0.6)';
      ctx.fillRect(20, cardY, cardW, cardH);
      ctx.fillStyle = '#9ca3af';
      ctx.font = '10px Inter, Arial';
      ctx.fillText('LIGHT', 30, cardY + 18);
      const zoneColors = { high: '#22c55e', low: '#eab308', no: '#9ca3af' };
      const zoneTexts = { high: 'HIGH GROWTH', low: 'LOW GROWTH', no: 'NO GROWTH' };
      ctx.fillStyle = zoneColors[selectedZone];
      ctx.font = 'bold 12px Inter, Arial';
      ctx.fillText(zoneTexts[selectedZone], 30, cardY + 38);
      ctx.fillText('CONDITIONS', 30, cardY + 54);

      // Temp
      ctx.fillStyle = 'rgba(0,0,0,0.6)';
      ctx.fillRect(20 + cardW + gap, cardY, cardW, cardH);
      ctx.fillStyle = '#9ca3af';
      ctx.font = '10px Inter, Arial';
      ctx.fillText('TEMP', 30 + cardW + gap, cardY + 18);
      ctx.fillStyle = '#d97706';
      ctx.font = 'bold 18px Inter, Arial';
      ctx.fillText(document.getElementById('temp').value + '°F', 30 + cardW + gap, cardY + 48);

      // Humidity
      ctx.fillStyle = 'rgba(0,0,0,0.6)';
      ctx.fillRect(20 + (cardW + gap) * 2, cardY, cardW, cardH);
      ctx.fillStyle = '#9ca3af';
      ctx.font = '10px Inter, Arial';
      ctx.fillText('HUMIDITY', 30 + (cardW + gap) * 2, cardY + 18);
      ctx.fillStyle = '#3b82f6';
      ctx.font = 'bold 18px Inter, Arial';
      ctx.fillText(document.getElementById('humidity').value + '%', 30 + (cardW + gap) * 2, cardY + 48);

      // Tags
      let tagX = 20;
      const tagY = cardY + cardH + 12;
      
      ctx.fillStyle = 'rgba(255,255,255,0.15)';
      ctx.fillRect(tagX, tagY, ctx.measureText(selectedDir + '-facing').width + 20, 26);
      ctx.fillStyle = 'rgba(255,255,255,0.8)';
      ctx.font = '11px Inter, Arial';
      ctx.fillText(selectedDir + '-facing', tagX + 10, tagY + 17);
      tagX += ctx.measureText(selectedDir + '-facing').width + 30;
      
      if (document.getElementById('grow-lights').checked) {
        ctx.fillStyle = 'rgba(255,255,255,0.15)';
        ctx.fillRect(tagX, tagY, 95, 26);
        ctx.fillStyle = 'rgba(255,255,255,0.8)';
        ctx.fillText('⚡ Grow lights', tagX + 10, tagY + 17);
      }

      generatedCoverUrl = canvas.toDataURL('image/jpeg', 0.95);
      document.getElementById('cover-image').src = generatedCoverUrl;
      
      document.getElementById('form-view').classList.add('hidden');
      document.getElementById('cover-view').classList.remove('hidden');
      
      document.getElementById('gen-btn').textContent = 'Generate Cover';
      document.getElementById('gen-btn').disabled = false;
    }

    function downloadCover() {
      if (generatedCoverUrl) {
        const a = document.createElement('a');
        a.href = generatedCoverUrl;
        a.download = 'rousseau-cover.jpg';
        a.click();
      }
    }

    function shareCover() {
      if (navigator.share && generatedCoverUrl) {
        fetch(generatedCoverUrl)
          .then(r => r.blob())
          .then(blob => {
            const file = new File([blob], 'rousseau-cover.jpg', { type: 'image/jpeg' });
            navigator.share({ title: 'Rousseau Review', files: [file] });
          });
      } else {
        alert('Sharing not supported on this browser');
      }
    }

    function resetForm() {
      document.getElementById('cover-view').classList.add('hidden');
      document.getElementById('form-view').classList.remove('hidden');
      generatedCoverUrl = null;
    }

    function showGallery() {
      document.getElementById('form-view').classList.add('hidden');
      document.getElementById('cover-view').classList.add('hidden');
      document.getElementById('gallery-view').classList.remove('hidden');
    }
  </script>
</body>
</html>
